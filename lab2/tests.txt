Eshell V10.6  (abort with ^G)

1> P = pollution:createMonitor().
[#{},
 {dict,0,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}]

2> P1 = pollution:addStation("D17", {50.068079, 19.912638}, P).
[#{{50.068079,19.912638} => {"D17",{50.068079,19.912638}},
   "D17" => {"D17",{50.068079,19.912638}}},
 {dict,0,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}]

4> P2 = pollution:addStation("Kobierzyn", {50.005882, 19.884901}, P1).
[#{{50.005882,19.884901} =>
       {"Kobierzyn",{50.005882,19.884901}},
   {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
   "D17" => {"D17",{50.068079,19.912638}},
   "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
 {dict,0,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}]

5> P3 = pollution:addStation("Hel", {54.608850, 18.800993}, P2).
[#{{50.005882,19.884901} =>
       {"Kobierzyn",{50.005882,19.884901}},
   {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
   {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
   "D17" => {"D17",{50.068079,19.912638}},
   "Hel" => {"Hel",{54.60885,18.800993}},
   "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
 {dict,0,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}]

Jak widać poniżej, nie jest możliwe dodanie ponownie stacji o tych samych parametrach (ani części takich samych parametrów)
co już istniejąca. Poniższe przypisania bazują na tej samej zmiennej, jednak nie jest sygnalizowany błąd,
ponieważ P4 za pierwszym (i kolejnymi razami) otrzymało wartość error, co później zostało poprawnie dopasowane przy użyciu
mechanizmu pattern matching.
6> P4 = pollution:addStation("Hel", {54.608850, 18.800993}, P3).
This station is already registered!
error
7> P4 = pollution:addStation("Wcale nie hel", {54.608850, 18.800993}, P3).
This station is already registered!
error
8> P4 = pollution:addStation("Hel", {11, 12}, P3).
This station is already registered!
error

10> P5 = pollution:addValues("D17", calendar:local_time(), "PM2.5", 100, P3).
 [#{{50.005882,19.884901} =>
        {"Kobierzyn",{50.005882,19.884901}},
    {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
    {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
    "D17" => {"D17",{50.068079,19.912638}},
    "Hel" => {"Hel",{54.60885,18.800993}},
    "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
  {dict,1,16,16,8,80,48,
        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
        {{[],
          [[{"D17",{50.068079,19.912638}},
            {{{2020,3,30},22},"PM2.5",100}]],
          [],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}]

 11> P6 = pollution:addValues("D17", calendar:local_time(), "PM10", 76, P5).
 [#{{50.005882,19.884901} =>
        {"Kobierzyn",{50.005882,19.884901}},
    {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
    {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
    "D17" => {"D17",{50.068079,19.912638}},
    "Hel" => {"Hel",{54.60885,18.800993}},
    "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
  {dict,1,16,16,8,80,48,
        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
        {{[],
          [[{"D17",{50.068079,19.912638}},
            {{{2020,3,30},22},"PM2.5",100},
            {{{2020,3,30},22},"PM10",76}]],
          [],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}]

 12> P7 = pollution:addValues("D17", calendar:local_time(), "temp", -1, P6).
 [#{{50.005882,19.884901} =>
        {"Kobierzyn",{50.005882,19.884901}},
    {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
    {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
    "D17" => {"D17",{50.068079,19.912638}},
    "Hel" => {"Hel",{54.60885,18.800993}},
    "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
  {dict,1,16,16,8,80,48,
        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
        {{[],
          [[{"D17",{50.068079,19.912638}},
            {{{2020,3,30},22},"PM2.5",100},
            {{{2020,3,30},22},"PM10",76},
            {{{2020,3,30},22},"temp",-1}]],
          [],[],[],[],[],[],[],[],[],[],[],[],[],[]}}}]

Poniżej widać przykład dodania odczytu do stacji Kobierzyn za pomocą współrzędnych tej stacji. Operacja została zakońoczna
pomyślnie, wpis powstał pod odpowiednim kluczem.
 13> P8 = pollution:addValues({50.005882, 19.884901}, calendar:local_time(), "PM2.5", 60, P7).
 [#{{50.005882,19.884901} =>
        {"Kobierzyn",{50.005882,19.884901}},
    {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
    {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
    "D17" => {"D17",{50.068079,19.912638}},
    "Hel" => {"Hel",{54.60885,18.800993}},
    "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
  {dict,2,16,16,8,80,48,
        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
        {{[],
          [[{"D17",{50.068079,19.912638}},
            {{{2020,3,30},22},"PM2.5",100},
            {{{2020,3,30},22},"PM10",76},
            {{{2020,3,30},22},"temp",-1}]],
          [],[],[],[],
          [[{"Kobierzyn",{50.005882,19.884901}},
            {{{2020,3,30},22},"PM2.5",60}]],
          [],[],[],[],[],[],[],[],[]}}}]

 14> P9 = pollution:addValues("Kobierzyn", calendar:local_time(), "PM10", 70, P8).
 [#{{50.005882,19.884901} =>
        {"Kobierzyn",{50.005882,19.884901}},
    {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
    {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
    "D17" => {"D17",{50.068079,19.912638}},
    "Hel" => {"Hel",{54.60885,18.800993}},
    "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
  {dict,2,16,16,8,80,48,
        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
        {{[],
          [[{"D17",{50.068079,19.912638}},
            {{{2020,3,30},22},"PM2.5",100},
            {{{2020,3,30},22},"PM10",76},
            {{{2020,3,30},22},"temp",-1}]],
          [],[],[],[],
          [[{"Kobierzyn",{50.005882,19.884901}},
            {{{2020,3,30},22},"PM2.5",60},
            {{{2020,3,30},22},"PM10",70}]],
          [],[],[],[],[],[],[],[],[]}}}]

 15> P10 = pollution:addValues("Kobierzyn", calendar:local_time(), "tmp", -7, P9).
 [#{{50.005882,19.884901} =>
        {"Kobierzyn",{50.005882,19.884901}},
    {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
    {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
    "D17" => {"D17",{50.068079,19.912638}},
    "Hel" => {"Hel",{54.60885,18.800993}},
    "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
  {dict,2,16,16,8,80,48,
        {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
        {{[],
          [[{"D17",{50.068079,19.912638}},
            {{{2020,3,30},22},"PM2.5",100},
            {{{2020,3,30},22},"PM10",76},
            {{{2020,3,30},22},"temp",-1}]],
          [],[],[],[],
          [[{"Kobierzyn",{50.005882,19.884901}},
            {{{2020,3,30},22},"PM2.5",60},
            {{{2020,3,30},22},"PM10",70},
            {{{2020,3,30},22},"tmp",-7}]],
          [],[],[],[],[],[],[],[],[]}}}]

16> P11 = pollution:addValues("Hel", calendar:local_time(), "tmp", 2, P10).
[#{{50.005882,19.884901} =>
       {"Kobierzyn",{50.005882,19.884901}},
   {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
   {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
   "D17" => {"D17",{50.068079,19.912638}},
   "Hel" => {"Hel",{54.60885,18.800993}},
   "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
 {dict,3,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],
         [[{"D17",{50.068079,19.912638}},
           {{{2020,3,30},22},"PM2.5",100},
           {{{2020,3,30},22},"PM10",76},
           {{{2020,3,30},22},"temp",-1}]],
         [],[],[],[],
         [[{"Kobierzyn",{50.005882,19.884901}},
           {{{2020,3,30},22},"PM2.5",60},
           {{{2020,3,30},22},"PM10",70},
           {{{2020,3,30},22},"tmp",-7}]],
         [],[],[],
         [[{"Hel",{54.60885,18.800993}},{{{2020,...},22},"tmp",2}]],
         [],[],[],[],[]}}}]

17> P12 = pollution:addValues("Hel", calendar:local_time(), "PM2.5", 18, P11).
[#{{50.005882,19.884901} =>
       {"Kobierzyn",{50.005882,19.884901}},
   {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
   {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
   "D17" => {"D17",{50.068079,19.912638}},
   "Hel" => {"Hel",{54.60885,18.800993}},
   "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
 {dict,3,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],
         [[{"D17",{50.068079,19.912638}},
           {{{2020,3,30},22},"PM2.5",100},
           {{{2020,3,30},22},"PM10",76},
           {{{2020,3,30},22},"temp",-1}]],
         [],[],[],[],
         [[{"Kobierzyn",{50.005882,19.884901}},
           {{{2020,3,30},22},"PM2.5",60},
           {{{2020,3,30},22},"PM10",70},
           {{{2020,3,30},22},"tmp",-7}]],
         [],[],[],
         [[{"Hel",{54.60885,18.800993}},
           {{{2020,...},22},"tmp",2},
           {{{...},...},[...],...}]],
         [],[],[],[],[]}}}]

18> P13 = pollution:addValues("Hel", calendar:local_time(), "PM10", 30, P12).
[#{{50.005882,19.884901} =>
       {"Kobierzyn",{50.005882,19.884901}},
   {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
   {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
   "D17" => {"D17",{50.068079,19.912638}},
   "Hel" => {"Hel",{54.60885,18.800993}},
   "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
 {dict,3,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],
         [[{"D17",{50.068079,19.912638}},
           {{{2020,3,30},22},"PM2.5",100},
           {{{2020,3,30},22},"PM10",76},
           {{{2020,3,30},22},"temp",-1}]],
         [],[],[],[],
         [[{"Kobierzyn",{50.005882,19.884901}},
           {{{2020,3,30},22},"PM2.5",60},
           {{{2020,3,30},22},"PM10",70},
           {{{2020,3,30},22},"tmp",-7}]],
         [],[],[],
         [[{"Hel",{54.60885,18.800993}},
           {{{2020,...},22},"tmp",2},
           {{{...},...},[...],...},
           {{...},...}]],
         [],[],[],[],[]}}}]

Poniżej widoczna jest pomyślna operacja usunięcia odczytu PM10 ze stacji D17 z godziny 22. Wpis nie widnieje już w słowniku.
19> P14 = pollution:removeValue("D17", {{2020, 3, 30}, 22}, "PM10", P13).
[#{{50.005882,19.884901} =>
       {"Kobierzyn",{50.005882,19.884901}},
   {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
   {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
   "D17" => {"D17",{50.068079,19.912638}},
   "Hel" => {"Hel",{54.60885,18.800993}},
   "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
 {dict,3,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],
         [[{"D17",{50.068079,19.912638}},
           {{{2020,3,30},22},"PM2.5",100},
           {{{2020,3,30},22},"temp",-1}]],
         [],[],[],[],
         [[{"Kobierzyn",{50.005882,19.884901}},
           {{{2020,3,30},22},"PM2.5",60},
           {{{2020,3,30},22},"PM10",70},
           {{{2020,3,30},22},"tmp",-7}]],
         [],[],[],
         [[{"Hel",{54.60885,18.800993}},
           {{{2020,...},22},"tmp",2},
           {{{...},...},[...],...},
           {{...},...}]],
         [],[],[],[],[]}}}]

Poniżej widzimy poprawny odcztyt wartości pomiaru PM10 ze stacji Kobierzyn z zadanej daty.
20> pollution:getOneValue("Kobierzyn", {{2020, 3, 30}, 22}, "PM10", P14).
{{{2020,3,30},22},"PM10",70}

21> P15 = pollution:addValues("Kobierzyn", calendar:local_time(), "PM2.5", 30, P14).
[#{{50.005882,19.884901} =>
       {"Kobierzyn",{50.005882,19.884901}},
   {50.068079,19.912638} => {"D17",{50.068079,19.912638}},
   {54.60885,18.800993} => {"Hel",{54.60885,18.800993}},
   "D17" => {"D17",{50.068079,19.912638}},
   "Hel" => {"Hel",{54.60885,18.800993}},
   "Kobierzyn" => {"Kobierzyn",{50.005882,19.884901}}},
 {dict,3,16,16,8,80,48,
       {[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]},
       {{[],
         [[{"D17",{50.068079,19.912638}},
           {{{2020,3,30},22},"PM2.5",100},
           {{{2020,3,30},22},"temp",-1}]],
         [],[],[],[],
         [[{"Kobierzyn",{50.005882,19.884901}},
           {{{2020,3,30},22},"PM2.5",60},
           {{{2020,3,30},22},"PM10",70},
           {{{2020,3,30},22},"tmp",-7},
           {{{2020,3,...},23},"PM2.5",30}]],
         [],[],[],
         [[{"Hel",{54.60885,18.800993}},
           {{{2020,...},22},"tmp",2},
           {{{...},...},[...],...},
           {{...},...}]],
         [],[],[],[],[]}}}]

Poniżej widzimy średnią wartość doczytów pomiarów PM2.5 ze stacji Kobierzyn. Stacja wysłała 2 pomiary: 60 i 30. Średnia
tych dwóch wartości wynosi 45.
22> pollution:getStationMean("Kobierzyn", "PM2.5", P15).
45.0

Następnie mamy test średniej wartości temperatury ze wszystkich stacji. Stacje wysłąły kolejno odczyty:
D17: -1
Kobierzyn: -7
Hel: 2
Średnia tych wartości wynosi -1
23> pollution:getDailyMean({2020, 3, 30}, "temp", P15).
-1.0

Kolejny jest test średniej wartości odczytów z danej godziny. Sprawdzona została stacja D17. Jej jedyny odczyt pochodzi z
godziny 22, tak więc średnia z godziny 23 wynosi 0.
24> pollution:getHourlyMean("D17", 23, "PM2.5", P15).
0

Ostatni test dotyczy funkcji zwracającej średnią wartość dla podanego typu w zadanym okresie czasu. Jako że jedyną
wartością PM10 dla stacji D17 jest 76, tak średnia wartość PM10 dla pierwszego kwartału 2020 roku wynosi, bez zaskoczenia,
76.
25> pollution:getSeasonalMean("D17", {2020, 1}, {2020, 4}, "PM10", P15).
76.0
